'use babel';

var assert = require('assert');

var _require = require('../../lib/markdown-it-math/index.js');

var math_plugin = _require.math_plugin;

describe('Options', function () {
  it('Should allow single-double `$` as delimiters', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineDelim: [['$', '$']],
      blockDelim: [['$$', '$$']]
    });

    var res1 = md.render('$1+1 = 2$');
    var res2 = md.render('$$\n1+1 = 2\n$$');
    assert.equal(res1, '<p><span class="math inline">1+1 = 2</span></p>\n');
    assert.equal(res2, '<div class="math block">1+1 = 2\n</div>\n');
  });
  it('Should allow LaTeX style delimiters', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineDelim: [['\\(', '\\)']],
      blockDelim: [['\\[', '\\]']]
    });

    var res1 = md.render('\\(1+1 = 2\\)'),
        res2 = md.render('\\[\n1+1 = 2\n\\]');
    assert.equal(res1, '<p><span class="math inline">1+1 = 2</span></p>\n');
    assert.equal(res2, '<div class="math block">1+1 = 2\n</div>\n');
  });
  it('Should allow newline in opening block delimiters', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineDelim: [['$$', '$$']],
      blockDelim: [['$$\n', '$$']]
    });

    var res1 = md.render('$$1+1 = 2$$'),
        res2 = md.render('$$\n1+1 = 2$$');
    assert.equal(res1, '<p><span class="math inline">1+1 = 2</span></p>\n');
    assert.equal(res2, '<div class="math block">1+1 = 2</div>\n');
  });
  it('Should allow newline in closing block delimiters', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineDelim: [['$$', '$$']],
      blockDelim: [['$$\n', '\n$$']]
    });

    var res1 = md.render('$$1+1 = 2$$'),
        res2 = md.render('$$\n1+1 = 2$$'),
        res3 = md.render('$$\n1+1 = 2\n$$');
    assert.equal(res1, '<p><span class="math inline">1+1 = 2</span></p>\n');
    assert.equal(res2, '<div class="math block">1+1 = 2$$</div>\n');
    assert.equal(res3, '<div class="math block">1+1 = 2\n</div>\n');
  });
  it('Should only support singular newlines in block math closing tags', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineDelim: [['$$', '$$']],
      blockDelim: [['$$\n', '\n\n$$']]
    });

    var res1 = md.render('$$1+1 = 2$$'),
        res2 = md.render('$$\n1+1 = 2$$'),
        res3 = md.render('$$\n1+1 = 2\n\n$$');
    assert.equal(res1, '<p><span class="math inline">1+1 = 2</span></p>\n');
    assert.equal(res2, '<div class="math block">1+1 = 2$$</div>\n');
    assert.equal(res3, '<div class="math block">1+1 = 2\n\n$$</div>\n');
  });
});

describe('Rendering options', function () {
  it('Should allow different options', function () {
    var md = require('markdown-it')().use(math_plugin, {
      renderingOptions: { decimalMark: ',' }
    });

    var res1 = md.render('$$40,2$$');
    assert.equal(res1, '<p><span class="math inline">40,2</span></p>\n');

    var res2 = md.render('$$$\n40,2\n$$$');
    assert.equal(res2, '<div class="math block">40,2\n</div>\n');
  });
});

describe('Renderer', function () {
  it('Should allow another renderer', function () {
    var md = require('markdown-it')().use(math_plugin, {
      inlineRenderer: function inlineRenderer(str) {
        return '<inline>' + str + '</inline>';
      },
      blockRenderer: function blockRenderer(str) {
        return '<display>' + str + '</display>';
      }
    });

    var res1 = md.render('$$1+1 = 2$$');
    assert.equal(res1, '<p><inline>1+1 = 2</inline></p>\n');

    var res2 = md.render('$$$\n\\sin(2\\pi)\n$$$');
    assert.equal(res2, '<display>\\sin(2\\pi)\n</display>\n');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2phenovLmF0b20vcGFja2FnZXMvbWFya2Rvd24tcHJldmlldy1wbHVzL3NwZWMvbWFya2Rvd24taXQtbWF0aC9vcHRpb25zLnNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxDQUFBOztBQUVYLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTs7ZUFDUixPQUFPLENBQUMscUNBQXFDLENBQUM7O0lBQTlELFdBQVcsWUFBWCxXQUFXOztBQUVqQixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVc7QUFDN0IsSUFBRSxDQUFDLDhDQUE4QyxFQUFFLFlBQVc7QUFDNUQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRTtBQUNqRCxpQkFBVyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekIsZ0JBQVUsRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzNCLENBQUMsQ0FBQTs7QUFFRixRQUFJLElBQUksR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFBO0FBQ2pDLFFBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtBQUN2QyxVQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxtREFBbUQsQ0FBQyxDQUFBO0FBQ3ZFLFVBQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLDJDQUEyQyxDQUFDLENBQUE7R0FDaEUsQ0FBQyxDQUFBO0FBQ0YsSUFBRSxDQUFDLHFDQUFxQyxFQUFFLFlBQVc7QUFDbkQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRTtBQUNqRCxpQkFBVyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDN0Is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QUFFLENBQUMsTUFBTSxDQUFDLHdCQUF3QixDQUFDLENBQUE7QUFDOUMsVUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUscUNBQXFDLENBQUMsQ0FBQTtHQUMxRCxDQUFDLENBQUE7Q0FDSCxDQUFDLENBQUEiLCJmaWxlIjoiL2hvbWUvamF6ei8uYXRvbS9wYWNrYWdlcy9tYXJrZG93bi1wcmV2aWV3LXBsdXMvc3BlYy9tYXJrZG93bi1pdC1tYXRoL29wdGlvbnMuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnXG5cbnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKVxudmFyIHsgbWF0aF9wbHVnaW4gfSA9IHJlcXVpcmUoJy4uLy4uL2xpYi9tYXJrZG93bi1pdC1tYXRoL2luZGV4LmpzJylcblxuZGVzY3JpYmUoJ09wdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgaXQoJ1Nob3VsZCBhbGxvdyBzaW5nbGUtZG91YmxlIGAkYCBhcyBkZWxpbWl0ZXJzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1kID0gcmVxdWlyZSgnbWFya2Rvd24taXQnKSgpLnVzZShtYXRoX3BsdWdpbiwge1xuICAgICAgaW5saW5lRGVsaW06IFtbJyQnLCAnJCddXSxcbiAgICAgIGJsb2NrRGVsaW06IFtbJyQkJywgJyQkJ11dLFxuICAgIH0pXG5cbiAgICB2YXIgcmVzMSA9IG1kLnJlbmRlcignJDErMSA9IDIkJylcbiAgICB2YXIgcmVzMiA9IG1kLnJlbmRlcignJCRcXG4xKzEgPSAyXFxuJCQnKVxuICAgIGFzc2VydC5lcXVhbChyZXMxLCAnPHA+PHNwYW4gY2xhc3M9XCJtYXRoIGlubGluZVwiPjErMSA9IDI8L3NwYW4+PC9wPlxcbicpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczIsICc8ZGl2IGNsYXNzPVwibWF0aCBibG9ja1wiPjErMSA9IDJcXG48L2Rpdj5cXG4nKVxuICB9KVxuICBpdCgnU2hvdWxkIGFsbG93IExhVGVYIHN0eWxlIGRlbGltaXRlcnMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWQgPSByZXF1aXJlKCdtYXJrZG93bi1pdCcpKCkudXNlKG1hdGhfcGx1Z2luLCB7XG4gICAgICBpbmxpbmVEZWxpbTogW1snXFxcXCgnLCAnXFxcXCknXV0sXG4gICAgICBibG9ja0RlbGltOiBbWydcXFxcWycsICdcXFxcXSddXSxcbiAgICB9KVxuXG4gICAgdmFyIHJlczEgPSBtZC5yZW5kZXIoJ1xcXFwoMSsxID0gMlxcXFwpJyksXG4gICAgICByZXMyID0gbWQucmVuZGVyKCdcXFxcW1xcbjErMSA9IDJcXG5cXFxcXScpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczEsICc8cD48c3BhbiBjbGFzcz1cIm1hdGggaW5saW5lXCI+MSsxID0gMjwvc3Bhbj48L3A+XFxuJylcbiAgICBhc3NlcnQuZXF1YWwocmVzMiwgJzxkaXYgY2xhc3M9XCJtYXRoIGJsb2NrXCI+MSsxID0gMlxcbjwvZGl2PlxcbicpXG4gIH0pXG4gIGl0KCdTaG91bGQgYWxsb3cgbmV3bGluZSBpbiBvcGVuaW5nIGJsb2NrIGRlbGltaXRlcnMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWQgPSByZXF1aXJlKCdtYXJrZG93bi1pdCcpKCkudXNlKG1hdGhfcGx1Z2luLCB7XG4gICAgICBpbmxpbmVEZWxpbTogW1snJCQnLCAnJCQnXV0sXG4gICAgICBibG9ja0RlbGltOiBbWyckJFxcbicsICckJCddXSxcbiAgICB9KVxuXG4gICAgdmFyIHJlczEgPSBtZC5yZW5kZXIoJyQkMSsxID0gMiQkJyksXG4gICAgICByZXMyID0gbWQucmVuZGVyKCckJFxcbjErMSA9IDIkJCcpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczEsICc8cD48c3BhbiBjbGFzcz1cIm1hdGggaW5saW5lXCI+MSsxID0gMjwvc3Bhbj48L3A+XFxuJylcbiAgICBhc3NlcnQuZXF1YWwocmVzMiwgJzxkaXYgY2xhc3M9XCJtYXRoIGJsb2NrXCI+MSsxID0gMjwvZGl2PlxcbicpXG4gIH0pXG4gIGl0KCdTaG91bGQgYWxsb3cgbmV3bGluZSBpbiBjbG9zaW5nIGJsb2NrIGRlbGltaXRlcnMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWQgPSByZXF1aXJlKCdtYXJrZG93bi1pdCcpKCkudXNlKG1hdGhfcGx1Z2luLCB7XG4gICAgICBpbmxpbmVEZWxpbTogW1snJCQnLCAnJCQnXV0sXG4gICAgICBibG9ja0RlbGltOiBbWyckJFxcbicsICdcXG4kJCddXSxcbiAgICB9KVxuXG4gICAgdmFyIHJlczEgPSBtZC5yZW5kZXIoJyQkMSsxID0gMiQkJyksXG4gICAgICByZXMyID0gbWQucmVuZGVyKCckJFxcbjErMSA9IDIkJCcpLFxuICAgICAgcmVzMyA9IG1kLnJlbmRlcignJCRcXG4xKzEgPSAyXFxuJCQnKVxuICAgIGFzc2VydC5lcXVhbChyZXMxLCAnPHA+PHNwYW4gY2xhc3M9XCJtYXRoIGlubGluZVwiPjErMSA9IDI8L3NwYW4+PC9wPlxcbicpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczIsICc8ZGl2IGNsYXNzPVwibWF0aCBibG9ja1wiPjErMSA9IDIkJDwvZGl2PlxcbicpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczMsICc8ZGl2IGNsYXNzPVwibWF0aCBibG9ja1wiPjErMSA9IDJcXG48L2Rpdj5cXG4nKVxuICB9KVxuICBpdCgnU2hvdWxkIG9ubHkgc3VwcG9ydCBzaW5ndWxhciBuZXdsaW5lcyBpbiBibG9jayBtYXRoIGNsb3NpbmcgdGFncycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBtZCA9IHJlcXVpcmUoJ21hcmtkb3duLWl0JykoKS51c2UobWF0aF9wbHVnaW4sIHtcbiAgICAgIGlubGluZURlbGltOiBbWyckJCcsICckJCddXSxcbiAgICAgIGJsb2NrRGVsaW06IFtbJyQkXFxuJywgJ1xcblxcbiQkJ11dLFxuICAgIH0pXG5cbiAgICB2YXIgcmVzMSA9IG1kLnJlbmRlcignJCQxKzEgPSAyJCQnKSxcbiAgICAgIHJlczIgPSBtZC5yZW5kZXIoJyQkXFxuMSsxID0gMiQkJyksXG4gICAgICByZXMzID0gbWQucmVuZGVyKCckJFxcbjErMSA9IDJcXG5cXG4kJCcpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczEsICc8cD48c3BhbiBjbGFzcz1cIm1hdGggaW5saW5lXCI+MSsxID0gMjwvc3Bhbj48L3A+XFxuJylcbiAgICBhc3NlcnQuZXF1YWwocmVzMiwgJzxkaXYgY2xhc3M9XCJtYXRoIGJsb2NrXCI+MSsxID0gMiQkPC9kaXY+XFxuJylcbiAgICBhc3NlcnQuZXF1YWwocmVzMywgJzxkaXYgY2xhc3M9XCJtYXRoIGJsb2NrXCI+MSsxID0gMlxcblxcbiQkPC9kaXY+XFxuJylcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdSZW5kZXJpbmcgb3B0aW9ucycsIGZ1bmN0aW9uKCkge1xuICBpdCgnU2hvdWxkIGFsbG93IGRpZmZlcmVudCBvcHRpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1kID0gcmVxdWlyZSgnbWFya2Rvd24taXQnKSgpLnVzZShtYXRoX3BsdWdpbiwge1xuICAgICAgcmVuZGVyaW5nT3B0aW9uczogeyBkZWNpbWFsTWFyazogJywnIH0sXG4gICAgfSlcblxuICAgIHZhciByZXMxID0gbWQucmVuZGVyKCckJDQwLDIkJCcpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczEsICc8cD48c3BhbiBjbGFzcz1cIm1hdGggaW5saW5lXCI+NDAsMjwvc3Bhbj48L3A+XFxuJylcblxuICAgIHZhciByZXMyID0gbWQucmVuZGVyKCckJCRcXG40MCwyXFxuJCQkJylcbiAgICBhc3NlcnQuZXF1YWwocmVzMiwgJzxkaXYgY2xhc3M9XCJtYXRoIGJsb2NrXCI+NDAsMlxcbjwvZGl2PlxcbicpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnUmVuZGVyZXInLCBmdW5jdGlvbigpIHtcbiAgaXQoJ1Nob3VsZCBhbGxvdyBhbm90aGVyIHJlbmRlcmVyJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1kID0gcmVxdWlyZSgnbWFya2Rvd24taXQnKSgpLnVzZShtYXRoX3BsdWdpbiwge1xuICAgICAgaW5saW5lUmVuZGVyZXI6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gYDxpbmxpbmU+JHtzdHJ9PC9pbmxpbmU+YFxuICAgICAgfSxcbiAgICAgIGJsb2NrUmVuZGVyZXI6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gYDxkaXNwbGF5PiR7c3RyfTwvZGlzcGxheT5gXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICB2YXIgcmVzMSA9IG1kLnJlbmRlcignJCQxKzEgPSAyJCQnKVxuICAgIGFzc2VydC5lcXVhbChyZXMxLCAnPHA+PGlubGluZT4xKzEgPSAyPC9pbmxpbmU+PC9wPlxcbicpXG5cbiAgICB2YXIgcmVzMiA9IG1kLnJlbmRlcignJCQkXFxuXFxcXHNpbigyXFxcXHBpKVxcbiQkJCcpXG4gICAgYXNzZXJ0LmVxdWFsKHJlczIsICc8ZGlzcGxheT5cXFxcc2luKDJcXFxccGkpXFxuPC9kaXNwbGF5PlxcbicpXG4gIH0pXG59KVxuIl19